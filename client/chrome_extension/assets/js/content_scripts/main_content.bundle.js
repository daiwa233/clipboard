!function(e){var t={};function o(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){"use strict";o.r(t);let n=localStorage.getItem("clipboardData"),a=JSON.parse(n)||{AltText:"image",domain:"",iframeID:"mdEditor",uploadImpl:"http://localhost:3001",notInit:!0},r=!1;chrome.storage.onChanged.addListener((function(e){let{clipboardData:t}=e;console.log(e),t&&"object"==typeof t.newValue&&localStorage.setItem("clipboardData",JSON.stringify(t.newValue)),t&&t.oldValue&&!t.newValue&&localStorage.removeItem("clipboardData")}));const{AltText:l,domain:i,iframeID:c,uploadImpl:u,notInit:d}=a;d||(r=!0);let s,p=!1;function f(e){if(!p)return;const{clipboardData:t}=e,{types:o}=t;if(!t||!t.items)return console.log("当前环境不支持获取剪贴板上的数据");if(o.some(e=>"Files"===e)){e.stopPropagation();let o=window.btoa(Date.now())+Math.random().toString(36).substr(2),n=null;for(let e=0;e<t.items.length;e++){let a=t.items[e];if(a.type.includes("image")){o=o+"."+a.type.split("/")[1],n=a.getAsFile();break}}((e,t)=>{let o=new ClipboardEvent("paste",{clipboardData:new DataTransfer});o.clipboardData.items.add(t,"text/plain"),e.dispatchEvent(o)})(s,(e=>`![${l}](${i}/${e})`)(o));const a=new FormData;a.append("ImgBlob",n),a.append("Fname",o),axios.post(u+"/upload",a).then(e=>{const{data:t}=e;200!==t.status&&console.log("在上传过程中出现问题")}).catch(e=>{console.log(e)})}}function m(){const e=(t="#"+c,document.querySelector(t)).contentWindow;var t;e&&(s=e.document.querySelector("textarea")),s?(s.addEventListener("focus",(function(e){p=!0})),s.addEventListener("blur",(function(e){p=!1})),s.addEventListener("paste",f)):console.log("没能找到粘贴事件的textarea")}window.addEventListener("load",(function(){r?m():console.log("如果要使用剪贴板插件，需要先点击扩展程序图标进行初始化。初始化完以后要刷新嗷")})),axios.defaults.withCredentials=!0}]);